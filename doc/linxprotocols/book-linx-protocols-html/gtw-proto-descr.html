<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>8.1 Gateway Protocol Description</title><link rel="stylesheet" href="html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><meta name="keywords" content=""><link rel="start" href="title.html" title="LINX Protocols"><link rel="up" href="gtw-protocol.html" title="8. Enea LINX Gateway Protocol"><link rel="prev" href="gtw-protocol.html" title="8. Enea LINX Gateway Protocol"><link rel="next" href="shm_cm.html" title="9. Enea LINX Shared Memory Connection Manager"><base target="body"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><td colspan="2" align="left"><span class="headerbaseline">Document Version 21</span></td><td align="right"><IMG src="images/enea_logo.png"></td></tr><tr><td colspan="3" align="center" valign="bottom"><h2 class="title"><a name="book_linx_proto"></a>LINX Protocols</h2></td></tr><tr><td width="20%" align="left"><a accesskey="p" href="gtw-protocol.html">Prev</a> </td><th width="60%" align="center">8. Enea LINX Gateway Protocol</th><td width="20%" align="right"> <a accesskey="n" href="shm_cm.html">Next</a></td></tr></table><hr></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="gtw-proto-descr"></a>8.1 Gateway Protocol Description</h2></div></div></div><p>The requests and replies must be coded in big-endian format. All
    requests and replies start with a 8 byte header followed by a variable
    part. The content of the variable part depends on the request/reply. These
    request/reply pairs are described in detail below.</p><div class="table"><a name="gwt-protocol-payload-types"></a><p class="title"><b>Table 8.1 Gateway request/reply codes (i.e. payload type)</b></p><div class="table-contents"><table summary="Gateway request/reply codes (i.e. payload type)" cellpadding="5" border="1"><colgroup><col><col><col></colgroup><tbody><tr><td>Request/Reply</td><td>Value</td><td>Definition</td></tr><tr><td>InterfaceRequest</td><td>1</td><td>Retrieve the server's capabilites.</td></tr><tr><td>InterfaceReply</td><td>2</td><td>Return the server capabilities.</td></tr><tr><td>LoginRequest</td><td>3</td><td>Not used.</td></tr><tr><td>ChallengeResponse</td><td>4</td><td>Not used.</td></tr><tr><td>ChallengeReply</td><td>5</td><td>Not used.</td></tr><tr><td>LoginReply</td><td>6</td><td>Not used.</td></tr><tr><td>CreateRequest</td><td>7</td><td>Request the server to create a client instance, i.e. start
            a gateway session.</td></tr><tr><td>CreateReply</td><td>8</td><td>Client instance has been created.</td></tr><tr><td>DestroyRequest</td><td>9</td><td>Request the server to destroy a "client" instance, i.e.
            terminate a gateway session.</td></tr><tr><td>DestroyReply</td><td>10</td><td>Client instance has been destroyed.</td></tr><tr><td>SendRequest</td><td>11</td><td>Request the server to execute a
            <code class="literal"><code class="function">send</code></code> or
            <code class="literal"><code class="function">send_w_s</code></code> call.</td></tr><tr><td>SendReply</td><td>12</td><td>Return the send/send_w_s result to the client.</td></tr><tr><td>ReceiveRequest</td><td>13</td><td>Request the server to execute a receive or receive_w_tmo
            call.</td></tr><tr><td>ReceiveReply</td><td>14</td><td>Return the receive/receive_w_tmo result to the
            client.</td></tr><tr><td>HuntRequest</td><td>15</td><td>Request the server to execute a hunt call.</td></tr><tr><td>HuntReply</td><td>16</td><td>Return the hunt result to the client.</td></tr><tr><td>AttachRequest</td><td>17</td><td>Request the server to execute a attach call.</td></tr><tr><td>AttachReply</td><td>18</td><td>Return the attach result to the client.</td></tr><tr><td>DetachRequest</td><td>19</td><td>Request the server to execute a detach call.</td></tr><tr><td>DetachReply</td><td>20</td><td>Return the deatch result to the client.</td></tr><tr><td>NameRequest</td><td>21</td><td>Retrieve the server's name.</td></tr><tr><td>NameReply</td><td>22</td><td>Return server name.</td></tr></tbody></table></div></div><br class="table-break"><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2623974"></a>8.1.1 Generic Request/Reply Header</h3></div></div></div><p>All requests/replies starts with this header.</p><div class="table"><a name="id2623984"></a><p class="title"><b>Table 8.2 Generic gateway request/reply header description</b></p><div class="table-contents"><table summary="Generic gateway request/reply header description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">payload_type</td><td>Type of request/reply, see table <a class="xref" href="gtw-proto-descr.html#gwt-protocol-payload-types" title="Table 8.1 Gateway request/reply codes (i.e. payload type)">Table 8.1 <i>Gateway request/reply codes (i.e. payload type)</i></a>.</td></tr><tr><td colspan="4">payload_len</td><td>Number of bytes for the type specific part, see the
              request/reply tables below.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2624094"></a>8.1.2 Interface Request/Reply Payload</h3></div></div></div><p>This request has two purposes. The client sends this request to
      retrieve information about the gateway server, e.g. supported requests,
      protocol version etc. It is also used as a "ping-message" to check that
      the server is alive, see receive request section for more
      information.</p><div class="table"><a name="id2624108"></a><p class="title"><b>Table 8.3 Interface request payload description</b></p><div class="table-contents"><table summary="Interface request payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">cli_version</td><td>The client implements this protocol version
              (100).</td></tr><tr><td colspan="4">cli_flags</td><td>Bit field. Bit0 indicates client's endian (0=big,
              1=little). Other bits are reserved.</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id2624209"></a><p class="title"><b>Table 8.4 Interface reply payload description</b></p><div class="table-contents"><table summary="Interface reply payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">status</td><td>On success, zero is returned, on error, -1 is
              returned.</td></tr><tr><td colspan="4">srv_version</td><td>The server implements this protocol version
              (100).</td></tr><tr><td colspan="4">srv_flags</td><td>Bit field. Bit0 indicates the server's endian (0=big,
              1=little). Other bits are reserved.</td></tr><tr><td colspan="4">types_len</td><td>Length of payload_types array (i.e. number of supported
              requests).</td></tr><tr><td colspan="4">payload_types</td><td>Array of the supported requests. Each entry is 4
              bytes.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2624364"></a>8.1.3 Create Request/Reply Payload</h3></div></div></div><p>This request is used to create a "client" instance on the server
      that the client communicates with.</p><div class="table"><a name="id2624375"></a><p class="title"><b>Table 8.5 Interface request payload description</b></p><div class="table-contents"><table summary="Interface request payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">user</td><td>Must be 0</td></tr><tr><td colspan="4">my_name</td><td>"A client identifier". 0-terminated string.</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id2624474"></a><p class="title"><b>Table 8.6 Interface reply payload description</b></p><div class="table-contents"><table summary="Interface reply payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">status</td><td>On success, 0 is returned, on error, -1 is
              returned.</td></tr><tr><td colspan="4">pid</td><td>A handle that should be used in the destroy
              request.</td></tr><tr><td colspan="4">max_sigsize</td><td>Maximum signal size that the server can handle.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2624593"></a>8.1.4 Destroy Request/Reply Payload</h3></div></div></div><p>This request is used to remove a "client" instance on the server,
      i.e. end the session that was started with the create request.</p><div class="table"><a name="id2624604"></a><p class="title"><b>Table 8.7 Destroy request payload description</b></p><div class="table-contents"><table summary="Destroy request payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">pid</td><td>Destroy this client (see create request).</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id2624688"></a><p class="title"><b>Table 8.8 Destroy reply payload description</b></p><div class="table-contents"><table summary="Destroy reply payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">status</td><td>On success, 0 is returned, on error, -1 is
              returned.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2624772"></a>8.1.5 Send Request/Reply Payload</h3></div></div></div><p>This request is used to ask the gateway server to execute a
      <code class="literal"><code class="function">send</code></code> or
      <code class="literal"><code class="function">send_w_s</code></code> call.</p><div class="table"><a name="id2624801"></a><p class="title"><b>Table 8.9 Send request payload description</b></p><div class="table-contents"><table summary="Send request payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">from_pid</td><td>Send signal with this pid as sender (send_w_s) or 0
              (send).</td></tr><tr><td colspan="4">dest_pid</td><td>Send signal to this pid.</td></tr><tr><td colspan="4">sig_len</td><td>Signal size (including signal number).</td></tr><tr><td colspan="4">sig_no</td><td>Signal number.</td></tr><tr><td colspan="4">sig_data</td><td>Signal data (except signal number).</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id2624950"></a><p class="title"><b>Table 8.10 Send reply payload description</b></p><div class="table-contents"><table summary="Send reply payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">status</td><td>On success, 0 is returned, on error, -1 is
              returned.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2625035"></a>8.1.6 Receive Request/Reply Payload</h3></div></div></div><p>This request is used to ask the server to execute a
      <code class="function">receive</code> or a <code class="function">receive_w_tmo</code>
      call. It differs from other requests, because the client may send a
      second receive request or an interface request before it has received
      the reply from the previous receive request. The client may send a
      second receive request to cancel the first one. Beware that server may
      already have sent a receive reply before the "cancel request" was
      received, in this case the client must also wait for the "cancel reply".
      The client may send an interface request to the server, which returns an
      interface reply. This is used by the client to detect if the server has
      die while waiting for a receive reply.</p><div class="table"><a name="id2625068"></a><p class="title"><b>Table 8.11 Receive request payload description</b></p><div class="table-contents"><table summary="Receive request payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">timeout</td><td>Receive timeout in milli-seconds
              (<code class="function">receive_w_tmo</code>) or -1 for infinity
              (<code class="function">receive</code>).</td></tr><tr><td colspan="4">sigsel_len</td><td>Number of elements in <code class="literal">sigsel_list</code>
              array. 0 means cancel previous <code class="function">receive</code>
              request.</td></tr><tr><td colspan="4">sigsel_list</td><td>Array of signal numbers to receive.</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id2625210"></a><p class="title"><b>Table 8.12 Receive reply payload description</b></p><div class="table-contents"><table summary="Receive reply payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">status</td><td>On success, 0 is returned, on error, -1 is
              returned.</td></tr><tr><td colspan="4">sender_pid</td><td>Received signal's sender (return value from
              sender).</td></tr><tr><td colspan="4">addressee_pid</td><td>Received signal's original addressee (return value from
              addressee).</td></tr><tr><td colspan="4">sig_len</td><td>Received signal's size (including signal number). 0 means
              "cancel receive request"-reply.</td></tr><tr><td colspan="4">sig_no</td><td>Received signal number.</td></tr><tr><td colspan="4">sig_data</td><td>Received signal's data (except signal number).</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2625380"></a>8.1.7 Hunt Request/Reply Payload</h3></div></div></div><p>This request is used to ask the gateway server to execute a hunt
      call.</p><div class="table"><a name="id2625391"></a><p class="title"><b>Table 8.13 Hunt request payload description</b></p><div class="table-contents"><table summary="Hunt request payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">user</td><td>Must be 0.</td></tr><tr><td colspan="4">name_index</td><td>Hunt name, offset (in bytes) into data.</td></tr><tr><td colspan="4">sig_index</td><td>Hunt signal data (except signal number), offset (in
              bytes) into data.</td></tr><tr><td colspan="4">sig_len</td><td>Hunt signal size (including signal number), 0 if no hunt
              signal is supplied.</td></tr><tr><td colspan="4">sig_no</td><td>Hunt signal number.</td></tr><tr><td colspan="4">data</td><td>Signal and process name storage.</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id2625558"></a><p class="title"><b>Table 8.14 Hunt reply payload description</b></p><div class="table-contents"><table summary="Hunt reply payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">status</td><td>On success, 0 is returned, on error, -1 is
              returned.</td></tr><tr><td colspan="4">pid</td><td>The pid returned by the hunt call or 0 if no process was
              found.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2625660"></a>8.1.8 Attach Request/Reply Payload</h3></div></div></div><p>This request is used to ask the gateway server to execute an
      attach call.</p><div class="table"><a name="id2625671"></a><p class="title"><b>Table 8.15 Attach request payload description</b></p><div class="table-contents"><table summary="Attach request payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">pid</td><td>Attach to this pid.</td></tr><tr><td colspan="4">sig_len</td><td>Attach signal size (including signal number), 0 if no
              attach signal is supplied.</td></tr><tr><td colspan="4">sig_no</td><td>Attach signal number.</td></tr><tr><td colspan="4">sig_data</td><td>Attach signal data (except signal number).</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id2625804"></a><p class="title"><b>Table 8.16 Attach reply payload description</b></p><div class="table-contents"><table summary="Attach reply payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">status</td><td>On success, 0 is returned, on error, -1 is
              returned.</td></tr><tr><td colspan="4">attref</td><td>Return value from the attach call.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2625905"></a>8.1.9 Detach Request/Reply Payload</h3></div></div></div><p>This request is used to ask the gateway server to execute a detach
      call.</p><div class="table"><a name="id2625916"></a><p class="title"><b>Table 8.17 Detach request payload description</b></p><div class="table-contents"><table summary="Detach request payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">attref</td><td>Cancel this attach. Value returned in a previous attach
              reply.</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id2626000"></a><p class="title"><b>Table 8.18 Detach reply payload description</b></p><div class="table-contents"><table summary="Detach reply payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">status</td><td>On success, 0 is returned, on error, -1 is
              returned.</td></tr></tbody></table></div></div><br class="table-break"></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id2626085"></a>8.1.10 Name Request/Reply Payload</h3></div></div></div><p>This request is used to retrieve the gateway server's name.</p><div class="table"><a name="id2626095"></a><p class="title"><b>Table 8.19 Name request payload description</b></p><div class="table-contents"><table summary="Name request payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">reserved</td><td>Reserved</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="id2626178"></a><p class="title"><b>Table 8.20 Name reply payload description</b></p><div class="table-contents"><table summary="Name reply payload description" cellpadding="5" border="1"><colgroup><col><col><col><col><col></colgroup><tbody><tr><td>byte0</td><td>byte1</td><td>byte2</td><td>byte3</td><td>Description</td></tr><tr><td colspan="4">status</td><td>On success, 0 is returned, on error, -1 is
              returned.</td></tr><tr><td colspan="4">name_len</td><td>Length of server name, including '\0'.</td></tr><tr><td colspan="4">name</td><td>Server name. 0-terminate string.</td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="gtw-protocol.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="gtw-protocol.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="shm_cm.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"><b>8. Enea LINX Gateway Protocol</b> </td><td width="20%" align="center"><a accesskey="h" href="title.html">Home</a> | <a accesskey="i" href="ix01.html">Index</a></td><td width="40%" align="right" valign="top"> <b>9. Enea LINX Shared Memory Connection Manager</b></td></tr><tr> </tr><tr><td colspan="3" align="center">© Enea Software AB 2011</td></tr></table></div></body></html>
